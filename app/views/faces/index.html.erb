<% title "View All" %>

<div id="logout">
  <%= button_to "Log out", destroy_user_session_path, :class => "button", :method => :delete %>
</div>

<h1>Staff members</h1>

  <div id="addnew">
    <%= button_to "Add new staff member", new_face_path, :class => "btn btn-danger", :method => :get %>
  </div>
  <%= button_to "Sync <span class = 'glyphicon glyphicon-refresh'> </span>", faces_scrape_path, :class => "btn btn-primary", :method => :post %>

<%= paginate(@faces) %>

<table>
  <tr>
    <th>Name</th>
    <th>Type</th>
    <th>Position</th>
    <th>Modules</th>
    <th>Room</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Photo</th>
    <th colspan="3">Actions</th>
  </tr>

  <% @faces.each do |face| %>
      <tr class="<%= face.visible ? 'default' : 'coloured' %>">
      <td>
        <% if face.ovr_name.to_s.empty? %>
          <%= face.name %>
        <% else %>
          <%= face.ovr_name %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_type.to_s.empty? %>
            <%= face._type %>
        <% else %>
            <%= face.ovr_type %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_position.to_s.empty? %>
            <%= face.position %>
        <% else %>
            <%= face.ovr_position %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_modules.to_s.empty? %>
            <%= face.modules %>
        <% else %>
            <%= face.ovr_modules %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_room.to_s.empty? %>
            <%= face.room %>
        <% else %>
            <%= face.ovr_room %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_email.to_s.empty? %>
            <%= face.email %>
        <% else %>
            <%= face.ovr_email %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_phone.to_s.empty? %>
            <%= face.phone %>
        <% else %>
            <%= face.ovr_phone %>
        <% end %>
      </td>
      <td>
        <% if face.ovr_photo.to_s.empty? %>
            <a href=<%= face.photo %>><%= face.photo %></a>
        <% else %>
            <a href=<%= face.ovr_photo %>><%= face.ovr_photo %></a>
        <% end %>
      </td>
      <td><%= link_to "Edit", edit_face_path(face) %></td>
      <td><%= link_to "View", face_path(face) %></td>
      <td><%= link_to "Delete", face_path(face), method: :delete, data: {confirm: "Are you sure you want to delete this staff member?"} %></td>
    </tr>
  <% end %>
</table>